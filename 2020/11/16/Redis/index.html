<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Redis | HLY-Blog</title><meta name="keywords" content="数据库"><meta name="author" content="HLY"><meta name="copyright" content="HLY"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="description" content="一、Nosql概述1、单机Mysql时代90年代,一个网站的访问量一般不会太大，单个数据库完全够用。随着用户增多，网站出现以下问题：  数据量增加到一定程度，单机数据库就放不下了 数据的索引（B+ Tree）,一个机器内存也存放不下 访问量变大后（读写混合），一台服务器承受不住。   2、Memcached(缓存) + Mysql + 垂直拆分（读写分离）网站80%的情况都是在读，每次都要去查询数">
<meta property="og:type" content="article">
<meta property="og:title" content="Redis">
<meta property="og:url" content="https://cddorz.github.io/2020/11/16/Redis/index.html">
<meta property="og:site_name" content="HLY-Blog">
<meta property="og:description" content="一、Nosql概述1、单机Mysql时代90年代,一个网站的访问量一般不会太大，单个数据库完全够用。随着用户增多，网站出现以下问题：  数据量增加到一定程度，单机数据库就放不下了 数据的索引（B+ Tree）,一个机器内存也存放不下 访问量变大后（读写混合），一台服务器承受不住。   2、Memcached(缓存) + Mysql + 垂直拆分（读写分离）网站80%的情况都是在读，每次都要去查询数">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://pic4.zhimg.com/80/v2-b0c015f49137896301d515bc54e04e0f_720w.jpg">
<meta property="article:published_time" content="2020-11-16T06:23:13.000Z">
<meta property="article:modified_time" content="2020-11-17T02:28:26.151Z">
<meta property="article:author" content="HLY">
<meta property="article:tag" content="数据库">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://pic4.zhimg.com/80/v2-b0c015f49137896301d515bc54e04e0f_720w.jpg"><link rel="shortcut icon" href="/img/tubiao.jpg"><link rel="canonical" href="https://cddorz.github.io/2020/11/16/Redis/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  ClickShowText: {"text":"I,LOVE,YOU","fontSize":"15px"},
  lightbox: 'fancybox',
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isanchor: false
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
    const now = new Date()
    const expiryDay = ttl * 86400000
    const item = {
      value: value,
      expiry: now.getTime() + expiryDay,
    }
    localStorage.setItem(key, JSON.stringify(item))
  },

  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2020-11-17 10:28:26'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(function () {  window.activateDarkMode = function () {
    document.documentElement.setAttribute('data-theme', 'dark')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
    }
  }
  window.activateLightMode = function () {
    document.documentElement.setAttribute('data-theme', 'light')
   if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
    }
  }
  const autoChangeMode = 'false'
  const t = saveToLocal.get('theme')
  if (autoChangeMode === '1') {
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
    const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
    const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
    const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified
    if (t === undefined) {
      if (isLightMode) activateLightMode()
      else if (isDarkMode) activateDarkMode()
      else if (isNotSpecified || hasNoSupport) {
        const now = new Date()
        const hour = now.getHours()
        const isNight = hour <= 6 || hour >= 18
        isNight ? activateDarkMode() : activateLightMode()
      }
      window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
        if (saveToLocal.get('theme') === undefined) {
          e.matches ? activateDarkMode() : activateLightMode()
        }
      })
    } else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else if (autoChangeMode === '2') {
    const now = new Date()
    const hour = now.getHours()
    const isNight = hour <= 6 || hour >= 18
    if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
    else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else {
    if (t === 'dark') activateDarkMode()
    else if (t === 'light') activateLightMode()
  }const asideStatus = saveToLocal.get('aside-status')
if (asideStatus !== undefined) {
   if (asideStatus === 'hide') {
     document.documentElement.classList.add('hide-aside')
   } else {
     document.documentElement.classList.remove('hide-aside')
   }
}})()</script><link rel="stylesheet" href="/clock/css/clock.css"/><meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="HLY-Blog" type="application/atom+xml">
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" data-lazy-src="/img/tubiao.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">8</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">5</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">5</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/-%E9%9F%B3%E4%B9%90"><i class="fa-fw /music/"></i><span> 清单|| fa fa-heartbeat</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://pic4.zhimg.com/80/v2-b0c015f49137896301d515bc54e04e0f_720w.jpg)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">HLY-Blog</a></span><span id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/-%E9%9F%B3%E4%B9%90"><i class="fa-fw /music/"></i><span> 清单|| fa fa-heartbeat</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><span class="close" id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><h1 class="post-title">Redis</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-11-16T06:23:13.000Z" title="发表于 2020-11-16 14:23:13">2020-11-16</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2020-11-17T02:28:26.151Z" title="更新于 2020-11-17 10:28:26">2020-11-17</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Redis/">Redis</a></span></div><div class="meta-secondline"> <span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/2020/11/16/Redis/#post-comment"><span class="gitalk-comment-count comment-count"></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="一、Nosql概述"><a href="#一、Nosql概述" class="headerlink" title="一、Nosql概述"></a>一、Nosql概述</h1><h2 id="1、单机Mysql时代"><a href="#1、单机Mysql时代" class="headerlink" title="1、单机Mysql时代"></a>1、单机Mysql时代</h2><p>90年代,一个网站的访问量一般不会太大，单个数据库完全够用。随着用户增多，网站出现以下问题：</p>
<ol>
<li>数据量增加到一定程度，单机数据库就放不下了</li>
<li>数据的索引（B+ Tree）,一个机器内存也存放不下</li>
<li>访问量变大后（读写混合），一台服务器承受不住。</li>
</ol>
<p><a target="_blank" rel="noopener" href="https://img-blog.csdnimg.cn/2020082010365930.png#pic_center"><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/2020082010365930.png#pic_center" alt="img"></a></p>
<h2 id="2、Memcached-缓存-Mysql-垂直拆分（读写分离）"><a href="#2、Memcached-缓存-Mysql-垂直拆分（读写分离）" class="headerlink" title="2、Memcached(缓存) + Mysql + 垂直拆分（读写分离）"></a>2、Memcached(缓存) + Mysql + 垂直拆分（读写分离）</h2><p>网站80%的情况都是在读，每次都要去查询数据库的话就十分的麻烦！所以说我们希望减轻数据库的压力，我们可以使用缓存来保证效率！</p>
<p><a target="_blank" rel="noopener" href="https://img-blog.csdnimg.cn/20200820103713734.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RERERlbmdf,size_16,color_FFFFFF,t_70#pic_center"><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200820103713734.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RERERlbmdf,size_16,color_FFFFFF,t_70#pic_center" alt="img"></a></p>
<p>优化过程经历了以下几个过程：</p>
<ol>
<li>优化数据库的数据结构和索引(难度大)</li>
<li>文件缓存，通过IO流获取比每次都访问数据库效率略高，但是流量爆炸式增长时候，IO流也承受不了</li>
<li>MemCache,当时最热门的技术，通过在数据库和数据库访问层之间加上一层缓存，第一次访问时查询数据库，将结果保存到缓存，后续的查询先检查缓存，若有直接拿去使用，效率显著提升。</li>
</ol>
<h2 id="3、分库分表-水平拆分-Mysql集群"><a href="#3、分库分表-水平拆分-Mysql集群" class="headerlink" title="3、分库分表 + 水平拆分 + Mysql集群"></a>3、分库分表 + 水平拆分 + Mysql集群</h2><p><a target="_blank" rel="noopener" href="https://img-blog.csdnimg.cn/20200820103739584.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RERERlbmdf,size_16,color_FFFFFF,t_70#pic_center"><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200820103739584.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RERERlbmdf,size_16,color_FFFFFF,t_70#pic_center" alt="img"></a></p>
<h2 id="4、如今最近的年代"><a href="#4、如今最近的年代" class="headerlink" title="4、如今最近的年代"></a>4、如今最近的年代</h2><p>如今信息量井喷式增长，各种各样的数据出现（用户定位数据，图片数据等），大数据的背景下关系型数据库（RDBMS）无法满足大量数据要求。Nosql数据库就能轻松解决这些问题。目前一个基本的互联网项目：</p>
<p><a target="_blank" rel="noopener" href="https://img-blog.csdnimg.cn/20200820103804572.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RERERlbmdf,size_16,color_FFFFFF,t_70#pic_center"><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200820103804572.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RERERlbmdf,size_16,color_FFFFFF,t_70#pic_center" alt="img"></a></p>
<h2 id="5、为什么要用NoSQL-？"><a href="#5、为什么要用NoSQL-？" class="headerlink" title="5、为什么要用NoSQL ？"></a>5、为什么要用NoSQL ？</h2><p>用户的个人信息，社交网络，地理位置。用户自己产生的数据，用户日志等等爆发式增长！这时候我们就需要使用NoSQL数据库的，Nosql可以很好的处理以上的情况！</p>
<h3 id="什么是Nosql"><a href="#什么是Nosql" class="headerlink" title="什么是Nosql"></a>什么是Nosql</h3><p>NoSQL = Not Only SQL（不仅仅是SQL）</p>
<p>Not Only Structured Query Language</p>
<p>关系型数据库：列+行，同一个表下数据的结构是一样的。</p>
<p>非关系型数据库：数据存储没有固定的格式，并且可以进行横向扩展。</p>
<p>NoSQL泛指非关系型数据库，随着web2.0互联网的诞生，传统的关系型数据库很难对付web2.0时代！尤其是超大规模的高并发的社区，暴露出来很多难以克服的问题，NoSQL在当今大数据环境下发展的十分迅速，Redis是发展最快的。</p>
<h3 id="Nosql特点"><a href="#Nosql特点" class="headerlink" title="Nosql特点"></a>Nosql特点</h3><p>1.方便扩展（数据之间没有关系，很好扩展！）</p>
<p>2.大数据量高性能（Redis一秒可以写8万次，读11万次，NoSQL的缓存记录级，是一种细粒度的缓存，性能会比较高！）</p>
<p>3.数据类型是多样型的！（不需要事先设计数据库，随取随用）</p>
<p>4.传统的 RDBMS 和 NoSQL</p>
<blockquote>
<p>传统的 RDBMS(关系型数据库)</p>
<blockquote>
<p>结构化组织<br>SQL<br>数据和关系都存在单独的表中 row col<br>操作，数据定义语言<br>严格的一致性<br>基础的事务<br>…</p>
</blockquote>
<p>Nosql</p>
<blockquote>
<p>不仅仅是数据<br>没有固定的查询语言<br>键值对存储，列存储，文档存储，图形数据库（社交关系）<br>最终一致性<br>CAP定理和BASE<br>高性能，高可用，高扩展<br>…</p>
</blockquote>
</blockquote>
<p>5.大数据时代的3V ：主要是描述问题的</p>
<p>海量Velume</p>
<p>多样Variety</p>
<p>实时Velocity</p>
<p>6.大数据时代的3高 ： 主要是对程序的要求</p>
<p>高并发</p>
<p>高可扩</p>
<p>高性能</p>
<p>真正在公司中的实践：NoSQL + RDBMS 一起使用才是最强的。</p>
<h1 id="二、Redis入门"><a href="#二、Redis入门" class="headerlink" title="二、Redis入门"></a>二、Redis入门</h1><h2 id="Redis是什么？"><a href="#Redis是什么？" class="headerlink" title="Redis是什么？"></a>Redis是什么？</h2><p>Redis（Remote Dictionary Server )，即远程字典服务。</p>
<p>是一个开源的使用ANSI C语言编写、支持网络、可基于内存亦可持久化的日志型、Key-Value数据库，并提供多种语言的API。</p>
<p>与memcached一样，为了保证效率，数据都是缓存在内存中。区别的是redis会周期性的把更新的数据写入磁盘或者把修改操作写入追加的记录文件，并且在此基础上实现了master-slave(主从)同步。</p>
<h2 id="Redis能干什么？"><a href="#Redis能干什么？" class="headerlink" title="Redis能干什么？"></a>Redis能干什么？</h2><ol>
<li>内存存储、持久化，内存是断电即失的，所以需要持久化（RDB、AOF）</li>
<li>高效率、用于高速缓冲</li>
<li>发布订阅系统</li>
<li>地图信息分析</li>
<li>计时器、计数器(eg：浏览量)</li>
<li>。。。</li>
</ol>
<h2 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h2><ol>
<li>多样的数据类型</li>
<li>持久化</li>
<li>集群</li>
<li>事务</li>
<li>…</li>
</ol>
<h2 id="环境搭建（略）"><a href="#环境搭建（略）" class="headerlink" title="环境搭建（略）"></a>环境搭建（略）</h2><h2 id="性能测试"><a href="#性能测试" class="headerlink" title="性能测试"></a>性能测试</h2><p><strong>redis-benchmark：</strong>Redis官方提供的性能测试工具，参数选项如下：</p>
<p><a target="_blank" rel="noopener" href="https://img-blog.csdnimg.cn/20200513214125892.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70"><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200513214125892.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80Mzg3MzIyNw==,size_16,color_FFFFFF,t_70" alt="img"></a></p>
<p>简单测试：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 测试：100个并发连接 100000请求</span><br><span class="line">redis-benchmark -h localhost -p 6379 -c 100 -n 100000</span><br></pre></td></tr></table></figure>

<p>结果：</p>
<p><a target="_blank" rel="noopener" href="https://img-blog.csdnimg.cn/20200820104343472.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RERERlbmdf,size_16,color_FFFFFF,t_70#pic_center"><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200820104343472.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RERERlbmdf,size_16,color_FFFFFF,t_70#pic_center" alt="img"></a></p>
<h5 id="连接redis："><a href="#连接redis：" class="headerlink" title="连接redis："></a>连接redis：</h5><p><img src= "/img/loading.gif" data-lazy-src="C:\Users\Dell\AppData\Roaming\Typora\typora-user-images\image-20201117102815212.png" alt="image-20201117102815212"></p>
<h2 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h2><p>redis默认有16个数据库</p>
<p><a target="_blank" rel="noopener" href="https://img-blog.csdnimg.cn/20200820104357466.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RERERlbmdf,size_16,color_FFFFFF,t_70#pic_center"><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200820104357466.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RERERlbmdf,size_16,color_FFFFFF,t_70#pic_center" alt="img"></a></p>
<p>默认使用的第0个;</p>
<p>16个数据库为：DB 0~DB 15 默认使用DB 0 ，可以使用<code>select n</code>切换到DB n，<code>dbsize</code>可以查看当前数据库的大小，与key数量相关。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; config get databases # 命令行查看数据库数量databases</span><br><span class="line">1) &quot;databases&quot;</span><br><span class="line">2) &quot;16&quot;</span><br><span class="line">127.0.0.1:6379&gt; select 8 # 切换数据库 DB 8</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379[8]&gt; dbsize # 查看数据库大小</span><br><span class="line">(integer) 0</span><br><span class="line">不同数据库之间 数据是不能互通的，并且dbsize 是根据库中key的个数。</span><br><span class="line">127.0.0.1:6379&gt; set name sakura</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; SELECT 8</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379[8]&gt; get name # db8中并不能获取db0中的键值对。</span><br><span class="line">(nil)</span><br><span class="line">127.0.0.1:6379[8]&gt; DBSIZE</span><br><span class="line">(integer) 0</span><br><span class="line">127.0.0.1:6379[8]&gt; SELECT 0</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; keys *</span><br><span class="line"></span><br><span class="line">&quot;counter:rand_int&quot;</span><br><span class="line">&quot;mylist&quot;</span><br><span class="line">&quot;name&quot;</span><br><span class="line">&quot;key:rand_int&quot;</span><br><span class="line">&quot;myset:rand_int&quot;</span><br><span class="line">127.0.0.1:6379&gt; DBSIZE # size和key个数相关</span><br><span class="line">(integer) 5</span><br></pre></td></tr></table></figure>

<p><code>keys *</code> ：查看当前数据库中所有的key。</p>
<p><code>flushdb</code>：清空当前数据库中的键值对。</p>
<p><code>flushall</code>：清空所有数据库的键值对。</p>
<blockquote>
<p>Redis是单线程的，Redis是基于内存操作的。</p>
</blockquote>
<p>所以Redis的性能瓶颈不是CPU,而是机器内存和网络带宽。</p>
<p>那么为什么Redis的速度如此快呢，性能这么高呢？QPS达到10W+</p>
<blockquote>
<p>Redis为什么单线程还这么快？</p>
</blockquote>
<ul>
<li>误区1：高性能的服务器一定是多线程的？</li>
<li>误区2：多线程（CPU上下文会切换！）一定比单线程效率高！</li>
</ul>
<p>核心：Redis是将所有的数据放在内存中的，所以说使用单线程去操作效率就是最高的，多线程（CPU上下文会切换：耗时的操作！），对于内存系统来说，如果没有上下文切换效率就是最高的，多次读写都是在一个CPU上的，在内存存储数据情况下，单线程就是最佳的方案。</p>
<h1 id="三、五大数据类型"><a href="#三、五大数据类型" class="headerlink" title="三、五大数据类型"></a>三、五大数据类型</h1><p> Redis是一个开源（BSD许可），内存存储的数据结构服务器，可用作数据库，高速缓存和消息队列代理。它支持字符串、哈希表、列表、集合、有序集合，位图，hyperloglogs等数据类型。内置复制、Lua脚本、LRU收回、事务以及不同级别磁盘持久化功能，同时通过Redis Sentinel提供高可用，通过Redis Cluster提供自动分区。</p>
<h2 id="Redis-key"><a href="#Redis-key" class="headerlink" title="Redis-key"></a>Redis-key</h2><p>在redis中无论什么数据类型，在数据库中都是以key-value形式保存，通过进行对Redis-key的操作，来完成对数据库中数据的操作。</p>
<p>下面学习的命令：</p>
<ul>
<li><code>exists key</code>：判断键是否存在</li>
<li><code>del key</code>：删除键值对</li>
<li><code>move key db</code>：将键值对移动到指定数据库</li>
<li><code>expire key second</code>：设置键值对的过期时间</li>
<li><code>type key</code>：查看value的数据类型</li>
</ul>
<p>　　　</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; keys * # 查看当前数据库所有key</span><br><span class="line">(empty list or set)</span><br><span class="line">127.0.0.1:6379&gt; set name qinjiang # set key</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; set age 20</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; keys *</span><br><span class="line">1) &quot;age&quot;</span><br><span class="line">2) &quot;name&quot;</span><br><span class="line">127.0.0.1:6379&gt; move age 1 # 将键值对移动到指定数据库</span><br><span class="line">(integer) 1</span><br><span class="line">127.0.0.1:6379&gt; EXISTS age # 判断键是否存在</span><br><span class="line">(integer) 0 # 不存在</span><br><span class="line">127.0.0.1:6379&gt; EXISTS name</span><br><span class="line">(integer) 1 # 存在</span><br><span class="line">127.0.0.1:6379&gt; SELECT 1</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379[1]&gt; keys *</span><br><span class="line">1) &quot;age&quot;</span><br><span class="line">127.0.0.1:6379[1]&gt; del age # 删除键值对</span><br><span class="line">(integer) 1 # 删除个数</span><br><span class="line">127.0.0.1:6379&gt; set age 20</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; EXPIRE age 15 # 设置键值对的过期时间</span><br><span class="line">(integer) 1 # 设置成功 开始计数</span><br><span class="line">127.0.0.1:6379&gt; ttl age # 查看key的过期剩余时间</span><br><span class="line">(integer) 13</span><br><span class="line">127.0.0.1:6379&gt; ttl age</span><br><span class="line">(integer) 11</span><br><span class="line">127.0.0.1:6379&gt; ttl age</span><br><span class="line">(integer) 9</span><br><span class="line">127.0.0.1:6379&gt; ttl age</span><br><span class="line">(integer) -2 # -2 表示key过期，-1表示key未设置过期时间</span><br><span class="line">127.0.0.1:6379&gt; get age # 过期的key 会被自动delete</span><br><span class="line">(nil)</span><br><span class="line">127.0.0.1:6379&gt; keys *</span><br><span class="line"></span><br><span class="line">&quot;name&quot;</span><br><span class="line"></span><br><span class="line">127.0.0.1:6379&gt; type name # 查看value的数据类型</span><br><span class="line">string</span><br></pre></td></tr></table></figure>



<p>关于TTL命令</p>
<p>Redis的key，通过TTL命令返回key的过期时间，一般来说有3种：</p>
<ol>
<li>当前key没有设置过期时间，所以会返回-1.</li>
<li>当前key有设置过期时间，而且key已经过期，所以会返回-2.</li>
<li>当前key有设置过期时间，且key还没有过期，故会返回key的正常剩余时间.</li>
</ol>
<p>关于重命名<code>RENAME</code>和<code>RENAMENX</code></p>
<ol>
<li><code>RENAME key newkey</code>修改 key 的名称</li>
<li><code>RENAMENX key newkey</code>仅当 newkey 不存在时，将 key 改名为 newkey 。</li>
</ol>
<h2 id="String-字符串"><a href="#String-字符串" class="headerlink" title="String(字符串)"></a>String(字符串)</h2><p>普通的set、get直接略过。</p>
<p>常用命令及其示例：</p>
<p><code>APPEND key value</code>: 向指定的key的value后追加字符串</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; set msg hello </span><br><span class="line">OK </span><br><span class="line">127.0.0.1:6379&gt; append msg &quot; world&quot; </span><br><span class="line">(integer) 11 </span><br><span class="line">127.0.0.1:6379&gt; get msg </span><br><span class="line">“hello world”</span><br></pre></td></tr></table></figure>

<p><code>DECR/INCR key</code>: 将指定key的value数值进行+1/-1(仅对于数字)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; set age 20 </span><br><span class="line">OK </span><br><span class="line">127.0.0.1:6379&gt; incr age </span><br><span class="line">(integer) 21 </span><br><span class="line">127.0.0.1:6379&gt; decr age </span><br><span class="line">(integer) 20</span><br></pre></td></tr></table></figure>

<p><code>INCRBY/DECRBY key n</code>: 按指定的步长对数值进行加减</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; INCRBY age 5</span><br><span class="line">(integer) 25 </span><br><span class="line">127.0.0.1:6379&gt; DECRBY age 10 </span><br><span class="line">(integer) 15</span><br></pre></td></tr></table></figure>

<p><code>INCRBYFLOAT key n</code>: 为数值加上浮点型数值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; INCRBYFLOAT age 5.2 </span><br><span class="line">“20.2”</span><br></pre></td></tr></table></figure>

<p><code>STRLEN key</code>: 获取key保存值的字符串长度</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; get msg </span><br><span class="line">“hello world” </span><br><span class="line">127.0.0.1:6379&gt; STRLEN msg </span><br><span class="line">(integer) 11</span><br></pre></td></tr></table></figure>

<p><code>GETRANGE key start end</code>: 按起止位置获取字符串（闭区间，起止位置都取）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; get msg </span><br><span class="line">“hello world” </span><br><span class="line">127.0.0.1:6379&gt; GETRANGE msg 3 9 </span><br><span class="line">“lo worl”</span><br></pre></td></tr></table></figure>

<p><code>SETRANGE key offset value</code>:用指定的value 替换key中 offset开始的值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; set msg hello</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; setrange msg 2 hello</span><br><span class="line">(integer) 7</span><br><span class="line">127.0.0.1:6379&gt; get msg</span><br><span class="line">&quot;hehello&quot;</span><br><span class="line">127.0.0.1:6379&gt; set msg2 world</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; setrange msg2 2 ww</span><br><span class="line">(integer) 5</span><br><span class="line">127.0.0.1:6379&gt; get msg2</span><br><span class="line">&quot;wowwd&quot;</span><br></pre></td></tr></table></figure>

<p><code>GETSET key value</code>: 将给定 key 的值设为 value ，并返回 key 的旧值(old value)。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; GETSET msg test </span><br><span class="line">“hello world”</span><br></pre></td></tr></table></figure>

<p><code>SETNX key value</code>: 仅当key不存在时进行set</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; SETNX msg test </span><br><span class="line">(integer) 0 </span><br><span class="line">127.0.0.1:6379&gt; SETNX name sakura </span><br><span class="line">(integer) 1</span><br></pre></td></tr></table></figure>

<p><code>SETEX key seconds value</code>: set 键值对并设置过期时间</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; setex name 10 root </span><br><span class="line">OK </span><br><span class="line">127.0.0.1:6379&gt; get name </span><br><span class="line">(nil)</span><br></pre></td></tr></table></figure>

<p><code>MSET key1 value1 [key2 value2..]</code>: 批量set键值对</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; MSET k1 v1 k2 v2 k3 v3 </span><br><span class="line">OK</span><br></pre></td></tr></table></figure>

<p><code>MSETNX key1 value1 [key2 value2..]</code>: 批量设置键值对，仅当参数中所有的key都不存在时执行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; MSETNX k1 v1 k4 v4 </span><br><span class="line">(integer) 0</span><br></pre></td></tr></table></figure>

<p><code>MGET key1 [key2..]</code>: 批量获取多个key保存的值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; MGET k1 k2 k3 </span><br><span class="line">1) “v1” </span><br><span class="line">2) “v2” </span><br><span class="line">3) “v3”</span><br></pre></td></tr></table></figure>

<p><code>PSETEX key milliseconds value</code>: 和 SETEX 命令相似，但它以毫秒为单位设置 key 的生存时间</p>
<p>String类似的使用场景：value除了是字符串还可以是数字，用途举例：</p>
<ul>
<li>计数器</li>
<li>统计多单位的数量：uid:123666：follow 0</li>
<li>粉丝数</li>
<li>对象存储缓存</li>
</ul>
<h2 id="List-列表"><a href="#List-列表" class="headerlink" title="List(列表)"></a>List(列表)</h2><p>Redis列表是简单的字符串列表，按照插入顺序排序。你可以添加一个元素到列表的头部（左边）或者尾部（右边）</p>
<p>一个列表最多可以包含 232 - 1 个元素 (4294967295, 每个列表超过40亿个元素)。</p>
<p>首先我们列表，可以经过规则定义将其变为队列、栈、双端队列等。</p>
<p><a target="_blank" rel="noopener" href="https://img-blog.csdnimg.cn/20200820104440398.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RERERlbmdf,size_16,color_FFFFFF,t_70#pic_center"><img src= "/img/loading.gif" data-lazy-src="https://img-blog.csdnimg.cn/20200820104440398.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RERERlbmdf,size_16,color_FFFFFF,t_70#pic_center" alt="img"></a></p>
<p>正如图Redis中List是可以进行双端操作的，所以命令也就分为了LXXX和RLLL两类，有时候L也表示List例如LLEN</p>
<ul>
<li><code>LPUSH/RPUSH key value1[value2..]</code>从左边/右边向列表中PUSH值(一个或者多个)。</li>
<li><code>LRANGE key start end</code> 获取list 起止元素==（索引从左往右 递增）==</li>
<li><code>LPUSHX/RPUSHX key value</code> 向已存在的列名中push值（一个或者多个）</li>
<li><code>LINSERT key BEFORE|AFTER pivot value</code> 在指定列表元素的前/后 插入value</li>
<li><code>LLEN key</code> 查看列表长度</li>
<li><code>LINDEX key index</code> 通过索引获取列表元素</li>
<li><code>LSET key index value</code> 通过索引为元素设值</li>
<li><code>LPOP/RPOP key</code> 从最左边/最右边移除值 并返回</li>
<li><code>RPOPLPUSH source destination</code> 将列表的尾部(右)最后一个值弹出，并返回，然后加到另一个列表的头部</li>
<li><code>LTRIM key start end</code> 通过下标截取指定范围内的列表</li>
<li><code>LREM key count value</code> List中是允许value重复的 count &gt; 0：从头部开始搜索 然后删除指定的value 至多删除count个 count &lt; 0：从尾部开始搜索… count = 0：删除列表中所有的指定value。</li>
<li><code>BLPOP/BRPOP key1[key2] timout</code> 移出并获取列表的第一个/最后一个元素， 如果列表没有元素会阻塞列表直到等待超时或发现可弹出元素为止。</li>
<li><code>BRPOPLPUSH source destination timeout</code> 和RPOPLPUSH功能相同，如果列表没有元素会阻塞列表直到等待超时或发现可弹出元素为止。</li>
</ul>
<p>代码示例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line">---------------------------LPUSH---RPUSH---LRANGE--------------------------------</span><br><span class="line">127.0.0.1:6379&gt; LPUSH mylist k1 # LPUSH mylist&#x3D;&gt;&#123;1&#125;</span><br><span class="line">(integer) 1</span><br><span class="line">127.0.0.1:6379&gt; LPUSH mylist k2 # LPUSH mylist&#x3D;&gt;&#123;2,1&#125;</span><br><span class="line">(integer) 2</span><br><span class="line">127.0.0.1:6379&gt; RPUSH mylist k3 # RPUSH mylist&#x3D;&gt;&#123;2,1,3&#125;</span><br><span class="line">(integer) 3</span><br><span class="line">127.0.0.1:6379&gt; get mylist # 普通的get是无法获取list值的</span><br><span class="line">(error) WRONGTYPE Operation against a key holding the wrong kind of value</span><br><span class="line">127.0.0.1:6379&gt; LRANGE mylist 0 4 # LRANGE 获取起止位置范围内的元素</span><br><span class="line"></span><br><span class="line">&quot;k2&quot;</span><br><span class="line">&quot;k1&quot;</span><br><span class="line">&quot;k3&quot;</span><br><span class="line">127.0.0.1:6379&gt; LRANGE mylist 0 2</span><br><span class="line">&quot;k2&quot;</span><br><span class="line">&quot;k1&quot;</span><br><span class="line">&quot;k3&quot;</span><br><span class="line">127.0.0.1:6379&gt; LRANGE mylist 0 1</span><br><span class="line">&quot;k2&quot;</span><br><span class="line">&quot;k1&quot;</span><br><span class="line">127.0.0.1:6379&gt; LRANGE mylist 0 -1 # 获取全部元素</span><br><span class="line">&quot;k2&quot;</span><br><span class="line">&quot;k1&quot;</span><br><span class="line">&quot;k3&quot;</span><br><span class="line"></span><br><span class="line">---------------------------LPUSHX---RPUSHX-----------------------------------</span><br><span class="line">127.0.0.1:6379&gt; LPUSHX list v1 # list不存在 LPUSHX失败</span><br><span class="line">(integer) 0</span><br><span class="line">127.0.0.1:6379&gt; LPUSHX list v1 v2</span><br><span class="line">(integer) 0</span><br><span class="line">127.0.0.1:6379&gt; LPUSHX mylist k4 k5 # 向mylist中 左边 PUSH k4 k5</span><br><span class="line">(integer) 5</span><br><span class="line">127.0.0.1:6379&gt; LRANGE mylist 0 -1</span><br><span class="line"></span><br><span class="line">&quot;k5&quot;</span><br><span class="line">&quot;k4&quot;</span><br><span class="line">&quot;k2&quot;</span><br><span class="line">&quot;k1&quot;</span><br><span class="line">&quot;k3&quot;</span><br><span class="line"></span><br><span class="line">---------------------------LINSERT--LLEN--LINDEX--LSET----------------------------</span><br><span class="line">127.0.0.1:6379&gt; LINSERT mylist after k2 ins_key1 # 在k2元素后 插入ins_key1</span><br><span class="line">(integer) 6</span><br><span class="line">127.0.0.1:6379&gt; LRANGE mylist 0 -1</span><br><span class="line"></span><br><span class="line">&quot;k5&quot;</span><br><span class="line">&quot;k4&quot;</span><br><span class="line">&quot;k2&quot;</span><br><span class="line">&quot;ins_key1&quot;</span><br><span class="line">&quot;k1&quot;</span><br><span class="line">&quot;k3&quot;</span><br><span class="line">127.0.0.1:6379&gt; LLEN mylist # 查看mylist的长度</span><br><span class="line">(integer) 6</span><br><span class="line">127.0.0.1:6379&gt; LINDEX mylist 3 # 获取下标为3的元素</span><br><span class="line">&quot;ins_key1&quot;</span><br><span class="line">127.0.0.1:6379&gt; LINDEX mylist 0</span><br><span class="line">&quot;k5&quot;</span><br><span class="line">127.0.0.1:6379&gt; LSET mylist 3 k6 # 将下标3的元素 set值为k6</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; LRANGE mylist 0 -1</span><br><span class="line">&quot;k5&quot;</span><br><span class="line">&quot;k4&quot;</span><br><span class="line">&quot;k2&quot;</span><br><span class="line">&quot;k6&quot;</span><br><span class="line">&quot;k1&quot;</span><br><span class="line">&quot;k3&quot;</span><br><span class="line"></span><br><span class="line">---------------------------LPOP--RPOP--------------------------</span><br><span class="line">127.0.0.1:6379&gt; LPOP mylist # 左侧(头部)弹出</span><br><span class="line">&quot;k5&quot;</span><br><span class="line">127.0.0.1:6379&gt; RPOP mylist # 右侧(尾部)弹出</span><br><span class="line">&quot;k3&quot;</span><br><span class="line">---------------------------RPOPLPUSH--------------------------</span><br><span class="line">127.0.0.1:6379&gt; LRANGE mylist 0 -1</span><br><span class="line"></span><br><span class="line">&quot;k4&quot;</span><br><span class="line">&quot;k2&quot;</span><br><span class="line">&quot;k6&quot;</span><br><span class="line">&quot;k1&quot;</span><br><span class="line">127.0.0.1:6379&gt; RPOPLPUSH mylist newlist # 将mylist的最后一个值(k1)弹出，加入到newlist的头部</span><br><span class="line">&quot;k1&quot;</span><br><span class="line">127.0.0.1:6379&gt; LRANGE newlist 0 -1</span><br><span class="line">&quot;k1&quot;</span><br><span class="line">127.0.0.1:6379&gt; LRANGE mylist 0 -1</span><br><span class="line">&quot;k4&quot;</span><br><span class="line">&quot;k2&quot;</span><br><span class="line">&quot;k6&quot;</span><br><span class="line"></span><br><span class="line">---------------------------LTRIM--------------------------</span><br><span class="line">127.0.0.1:6379&gt; LTRIM mylist 0 1 # 截取mylist中的 0~1部分</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; LRANGE mylist 0 -1</span><br><span class="line"></span><br><span class="line">&quot;k4&quot;</span><br><span class="line">&quot;k2&quot;</span><br><span class="line"></span><br><span class="line">初始 mylist: k2,k2,k2,k2,k2,k2,k4,k2,k2,k2,k2</span><br><span class="line">---------------------------LREM--------------------------</span><br><span class="line">127.0.0.1:6379&gt; LREM mylist 3 k2 # 从头部开始搜索 至多删除3个 k2</span><br><span class="line">(integer) 3</span><br><span class="line">删除后：mylist: k2,k2,k2,k4,k2,k2,k2,k2</span><br><span class="line">127.0.0.1:6379&gt; LREM mylist -2 k2 #从尾部开始搜索 至多删除2个 k2</span><br><span class="line">(integer) 2</span><br><span class="line">删除后：mylist: k2,k2,k2,k4,k2,k2</span><br><span class="line">---------------------------BLPOP--BRPOP--------------------------</span><br><span class="line">mylist: k2,k2,k2,k4,k2,k2</span><br><span class="line">newlist: k1</span><br><span class="line">127.0.0.1:6379&gt; BLPOP newlist mylist 30 # 从newlist中弹出第一个值，mylist作为候选</span><br><span class="line"></span><br><span class="line">&quot;newlist&quot; # 弹出</span><br><span class="line">&quot;k1&quot;</span><br><span class="line">127.0.0.1:6379&gt; BLPOP newlist mylist 30</span><br><span class="line">&quot;mylist&quot; # 由于newlist空了 从mylist中弹出</span><br><span class="line">&quot;k2&quot;</span><br><span class="line">127.0.0.1:6379&gt; BLPOP newlist 30</span><br><span class="line">(30.10s) # 超时了</span><br><span class="line"></span><br><span class="line">127.0.0.1:6379&gt; BLPOP newlist 30 # 我们连接另一个客户端向newlist中push了test, 阻塞被解决。</span><br><span class="line"></span><br><span class="line">&quot;newlist&quot;</span><br><span class="line">&quot;test&quot;</span><br><span class="line">(12.54s)</span><br></pre></td></tr></table></figure>

<h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><ul>
<li>list实际上是一个链表，before Node after , left, right 都可以插入值</li>
<li>如果key不存在，则创建新的链表</li>
<li>如果key存在，新增内容</li>
<li>如果移除了所有值，空链表，也代表不存在</li>
<li>在两边插入或者改动值，效率最高！修改中间元素，效率相对较低</li>
</ul>
<p>应用：</p>
<p>消息排队！消息队列（Lpush Rpop）,栈（Lpush Lpop）</p>
<h2 id="Set-集合）"><a href="#Set-集合）" class="headerlink" title="Set(集合）"></a>Set(集合）</h2><p>Redis的Set是string类型的无序集合。集合成员是唯一的，这就意味着集合中不能出现重复的数据。</p>
<p>Redis中集合是通过哈希表实现的，所以添加，删除，查找的复杂度都是O(1)。</p>
<p>集合中最大的成员数为 232 - 1 (4294967295, 每个集合可存储40多亿个成员)。</p>
<ul>
<li><code>SADD key member1[member2..]</code> 向集合中无序增加一个/多个成员</li>
<li><code>SCARD key</code> 获取集合的成员数</li>
<li><code>SMEMBERS key</code> 返回集合中所有的成员</li>
<li><code>SISMEMBER key member</code> 查询member元素是否是集合的成员,结果是无序的</li>
<li><code>SRANDMEMBER key [count]</code> 随机返回集合中count个成员，count缺省值为1</li>
<li><code>SPOP key [count]</code> 随机移除并返回集合中count个成员，count缺省值为1</li>
<li><code>SMOVE source destination member</code> 将source集合的成员member移动到destination集合</li>
<li><code>SREM key member1[member2..]</code> 移除集合中一个/多个成员</li>
<li><code>SDIFF key1[key2..]</code> 返回所有集合的差集 key1- key2 - …</li>
<li><code>SDIFFSTORE destination key1[key2..]</code> 在SDIFF的基础上，将结果保存到集合中==(覆盖)==。不能保存到其他类型key噢！</li>
<li><code>SINTER key1 [key2..]</code> 返回所有集合的交集</li>
<li><code>SINTERSTORE destination key1[key2..]</code> 在SINTER的基础上，存储结果到集合中。覆盖</li>
<li><code>SUNION key1 [key2..]</code> 返回所有集合的并集</li>
<li><code>SUNIONSTORE destination key1 [key2..]</code> 在SUNION的基础上，存储结果到及和张。覆盖</li>
<li><code>SSCAN KEY [MATCH pattern] [COUNT count]</code> 在大量数据环境下，使用此命令遍历集合中元素，每次遍历部分</li>
</ul>
<p>代码示例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line">---------------SADD--SCARD--SMEMBERS--SISMEMBER--------------------</span><br><span class="line">127.0.0.1:6379&gt; SADD myset m1 m2 m3 m4 # 向myset中增加成员 m1~m4</span><br><span class="line">(integer) 4</span><br><span class="line">127.0.0.1:6379&gt; SCARD myset # 获取集合的成员数目</span><br><span class="line">(integer) 4</span><br><span class="line">127.0.0.1:6379&gt; smembers myset # 获取集合中所有成员</span><br><span class="line"></span><br><span class="line">&quot;m4&quot;</span><br><span class="line">&quot;m3&quot;</span><br><span class="line">&quot;m2&quot;</span><br><span class="line">&quot;m1&quot;</span><br><span class="line">127.0.0.1:6379&gt; SISMEMBER myset m5 # 查询m5是否是myset的成员</span><br><span class="line">(integer) 0 # 不是，返回0</span><br><span class="line">127.0.0.1:6379&gt; SISMEMBER myset m2</span><br><span class="line">(integer) 1 # 是，返回1</span><br><span class="line">127.0.0.1:6379&gt; SISMEMBER myset m3</span><br><span class="line">(integer) 1</span><br><span class="line"></span><br><span class="line">---------------------SRANDMEMBER--SPOP----------------------------------</span><br><span class="line">127.0.0.1:6379&gt; SRANDMEMBER myset 3 # 随机返回3个成员</span><br><span class="line"></span><br><span class="line">&quot;m2&quot;</span><br><span class="line">&quot;m3&quot;</span><br><span class="line">&quot;m4&quot;</span><br><span class="line">127.0.0.1:6379&gt; SRANDMEMBER myset # 随机返回1个成员</span><br><span class="line">&quot;m3&quot;</span><br><span class="line">127.0.0.1:6379&gt; SPOP myset 2 # 随机移除并返回2个成员</span><br><span class="line">&quot;m1&quot;</span><br><span class="line">&quot;m4&quot;</span><br><span class="line"></span><br><span class="line">将set还原到&#123;m1,m2,m3,m4&#125;</span><br><span class="line">---------------------SMOVE--SREM----------------------------------------</span><br><span class="line">127.0.0.1:6379&gt; SMOVE myset newset m3 # 将myset中m3成员移动到newset集合</span><br><span class="line">(integer) 1</span><br><span class="line">127.0.0.1:6379&gt; SMEMBERS myset</span><br><span class="line"></span><br><span class="line">&quot;m4&quot;</span><br><span class="line">&quot;m2&quot;</span><br><span class="line">&quot;m1&quot;</span><br><span class="line">127.0.0.1:6379&gt; SMEMBERS newset</span><br><span class="line">&quot;m3&quot;</span><br><span class="line">127.0.0.1:6379&gt; SREM newset m3 # 从newset中移除m3元素</span><br><span class="line">(integer) 1</span><br><span class="line">127.0.0.1:6379&gt; SMEMBERS newset</span><br><span class="line">(empty list or set)</span><br><span class="line"></span><br><span class="line">下面开始是多集合操作,多集合操作中若只有一个参数默认和自身进行运算</span><br><span class="line">setx&#x3D;&gt;&#123;m1,m2,m4,m6&#125;, sety&#x3D;&gt;&#123;m2,m5,m6&#125;, setz&#x3D;&gt;&#123;m1,m3,m6&#125;</span><br><span class="line">-----------------------------SDIFF------------------------------------</span><br><span class="line">127.0.0.1:6379&gt; SDIFF setx sety setz # 等价于setx-sety-setz</span><br><span class="line"></span><br><span class="line">&quot;m4&quot;</span><br><span class="line">127.0.0.1:6379&gt; SDIFF setx sety # setx - sety</span><br><span class="line">&quot;m4&quot;</span><br><span class="line">&quot;m1&quot;</span><br><span class="line">127.0.0.1:6379&gt; SDIFF sety setx # sety - setx</span><br><span class="line">&quot;m5&quot;</span><br><span class="line"></span><br><span class="line">-------------------------SINTER---------------------------------------</span><br><span class="line">共同关注（交集）</span><br><span class="line">127.0.0.1:6379&gt; SINTER setx sety setz # 求 setx、sety、setx的交集</span><br><span class="line"></span><br><span class="line">&quot;m6&quot;</span><br><span class="line">127.0.0.1:6379&gt; SINTER setx sety # 求setx sety的交集</span><br><span class="line">&quot;m2&quot;</span><br><span class="line">&quot;m6&quot;</span><br><span class="line"></span><br><span class="line">-------------------------SUNION---------------------------------------</span><br><span class="line">127.0.0.1:6379&gt; SUNION setx sety setz # setx sety setz的并集</span><br><span class="line"></span><br><span class="line">&quot;m4&quot;</span><br><span class="line">&quot;m6&quot;</span><br><span class="line">&quot;m3&quot;</span><br><span class="line">&quot;m2&quot;</span><br><span class="line">&quot;m1&quot;</span><br><span class="line">&quot;m5&quot;</span><br><span class="line">127.0.0.1:6379&gt; SUNION setx sety # setx sety 并集</span><br><span class="line">&quot;m4&quot;</span><br><span class="line">&quot;m6&quot;</span><br><span class="line">&quot;m2&quot;</span><br><span class="line">&quot;m1&quot;</span><br><span class="line">&quot;m5&quot;</span><br></pre></td></tr></table></figure>

<h2 id="Hash（哈希）"><a href="#Hash（哈希）" class="headerlink" title="Hash（哈希）"></a>Hash（哈希）</h2><p>Redis hash 是一个string类型的field和value的映射表，hash特别适合用于存储对象。</p>
<p>Set就是一种简化的Hash,只变动key,而value使用默认值填充。可以将一个Hash表作为一个对象进行存储，表中存放对象的信息。</p>
<ul>
<li><code>HSET key field value</code> 将哈希表 key 中的字段 field 的值设为 value 。重复设置同一个field会覆盖,返回0</li>
<li><code>HMSET key field1 value1 [field2 value2..]</code> 同时将多个 field-value (域-值)对设置到哈希表 key 中。</li>
<li><code>HSETNX key field value</code> 只有在字段 field 不存在时，设置哈希表字段的值。</li>
<li><code>HEXISTS key field</code> 查看哈希表 key 中，指定的字段是否存在。</li>
<li><code>HGET key field value</code> 获取存储在哈希表中指定字段的值</li>
<li><code>HMGET key field1 [field2..]</code> 获取所有给定字段的值</li>
<li><code>HGETALL key</code> 获取在哈希表key 的所有字段和值</li>
<li><code>HKEYS key</code> 获取哈希表key中所有的字段</li>
<li><code>HLEN key</code> 获取哈希表中字段的数量</li>
<li><code>HVALS key</code> 获取哈希表中所有值</li>
<li><code>HDEL key field1 [field2..]</code> 删除哈希表key中一个/多个field字段</li>
<li><code>HINCRBY key field n</code> 为哈希表 key 中的指定字段的整数值加上增量n，并返回增量后结果 一样只适用于整数型字段</li>
<li><code>HINCRBYFLOAT key field n</code> 为哈希表 key 中的指定字段的浮点数值加上增量 n。</li>
<li><code>HSCAN key cursor [MATCH pattern] [COUNT count]</code> 迭代哈希表中的键值对。</li>
</ul>
<p>代码示例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">------------------------HSET--HMSET--HSETNX----------------</span><br><span class="line">127.0.0.1:6379&gt; HSET studentx name sakura # 将studentx哈希表作为一个对象，设置name为sakura</span><br><span class="line">(integer) 1</span><br><span class="line">127.0.0.1:6379&gt; HSET studentx name gyc # 重复设置field进行覆盖，并返回0</span><br><span class="line">(integer) 0</span><br><span class="line">127.0.0.1:6379&gt; HSET studentx age 20 # 设置studentx的age为20</span><br><span class="line">(integer) 1</span><br><span class="line">127.0.0.1:6379&gt; HMSET studentx sex 1 tel 15623667886 # 设置sex为1，tel为15623667886</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; HSETNX studentx name gyc # HSETNX 设置已存在的field</span><br><span class="line">(integer) 0 # 失败</span><br><span class="line">127.0.0.1:6379&gt; HSETNX studentx email 12345@qq.com</span><br><span class="line">(integer) 1 # 成功</span><br><span class="line">----------------------HEXISTS--------------------------------</span><br><span class="line">127.0.0.1:6379&gt; HEXISTS studentx name # name字段在studentx中是否存在</span><br><span class="line">(integer) 1 # 存在</span><br><span class="line">127.0.0.1:6379&gt; HEXISTS studentx addr</span><br><span class="line">(integer) 0 # 不存在</span><br><span class="line">-------------------HGET--HMGET--HGETALL-----------</span><br><span class="line">127.0.0.1:6379&gt; HGET studentx name # 获取studentx中name字段的value</span><br><span class="line">&quot;gyc&quot;</span><br><span class="line">127.0.0.1:6379&gt; HMGET studentx name age tel # 获取studentx中name、age、tel字段的value</span><br><span class="line"></span><br><span class="line">&quot;gyc&quot;</span><br><span class="line">&quot;20&quot;</span><br><span class="line">&quot;15623667886&quot;</span><br><span class="line">127.0.0.1:6379&gt; HGETALL studentx # 获取studentx中所有的field及其value</span><br><span class="line">&quot;name&quot;</span><br><span class="line">&quot;gyc&quot;</span><br><span class="line">&quot;age&quot;</span><br><span class="line">&quot;20&quot;</span><br><span class="line">&quot;sex&quot;</span><br><span class="line">&quot;1&quot;</span><br><span class="line">&quot;tel&quot;</span><br><span class="line">&quot;15623667886&quot;</span><br><span class="line">&quot;email&quot;</span><br><span class="line">&quot;12345@qq.com&quot;</span><br><span class="line"></span><br><span class="line">--------------------HKEYS--HLEN--HVALS--------------</span><br><span class="line">127.0.0.1:6379&gt; HKEYS studentx # 查看studentx中所有的field</span><br><span class="line"></span><br><span class="line">&quot;name&quot;</span><br><span class="line">&quot;age&quot;</span><br><span class="line">&quot;sex&quot;</span><br><span class="line">&quot;tel&quot;</span><br><span class="line">&quot;email&quot;</span><br><span class="line">127.0.0.1:6379&gt; HLEN studentx # 查看studentx中的字段数量</span><br><span class="line">(integer) 5</span><br><span class="line">127.0.0.1:6379&gt; HVALS studentx # 查看studentx中所有的value</span><br><span class="line">&quot;gyc&quot;</span><br><span class="line">&quot;20&quot;</span><br><span class="line">&quot;1&quot;</span><br><span class="line">&quot;15623667886&quot;</span><br><span class="line">&quot;12345@qq.com&quot;</span><br><span class="line"></span><br><span class="line">-------------------------HDEL--------------------------</span><br><span class="line">127.0.0.1:6379&gt; HDEL studentx sex tel # 删除studentx 中的sex、tel字段</span><br><span class="line">(integer) 2</span><br><span class="line">127.0.0.1:6379&gt; HKEYS studentx</span><br><span class="line"></span><br><span class="line">&quot;name&quot;</span><br><span class="line">&quot;age&quot;</span><br><span class="line">&quot;email&quot;</span><br><span class="line"></span><br><span class="line">-------------HINCRBY--HINCRBYFLOAT------------------------</span><br><span class="line">127.0.0.1:6379&gt; HINCRBY studentx age 1 # studentx的age字段数值+1</span><br><span class="line">(integer) 21</span><br><span class="line">127.0.0.1:6379&gt; HINCRBY studentx name 1 # 非整数字型字段不可用</span><br><span class="line">(error) ERR hash value is not an integer</span><br><span class="line">127.0.0.1:6379&gt; HINCRBYFLOAT studentx weight 0.6 # weight字段增加0.6</span><br><span class="line">&quot;90.8&quot;</span><br></pre></td></tr></table></figure>



<p> Hash变更的数据user name age，尤其是用户信息之类的，经常变动的信息！Hash更适合于对象的存储，Sring更加适合字符串存储！</p>
<h2 id="Zset（有序集合）"><a href="#Zset（有序集合）" class="headerlink" title="Zset（有序集合）"></a>Zset（有序集合）</h2><p>不同的是每个元素都会关联一个double类型的分数（score）。redis正是通过分数来为集合中的成员进行从小到大的排序。</p>
<p>score相同：按字典顺序排序</p>
<p>有序集合的成员是唯一的,但分数(score)却可以重复。</p>
<ul>
<li><code>ZADD key score member1 [score2 member2]</code> 向有序集合添加一个或多个成员，或者更新已存在成员的分数</li>
<li><code>ZCARD key</code> 获取有序集合的成员数</li>
<li><code>ZCOUNT key min max</code> 计算在有序集合中指定区间score的成员数</li>
<li><code>ZINCRBY key n member</code> 有序集合中对指定成员的分数加上增量 n</li>
<li><code>ZSCORE key member</code> 返回有序集中，成员的分数值</li>
<li><code>ZRANK key member</code> 返回有序集合中指定成员的索引</li>
<li><code>ZRANGE key start end</code> 通过索引区间返回有序集合成指定区间内的成员</li>
<li><code>ZRANGEBYLEX key min max</code> 通过字典区间返回有序集合的成员</li>
<li><code>ZRANGEBYSCORE key min max</code> 通过分数返回有序集合指定区间内的成员==-inf 和 +inf分别表示最小最大值，只支持开区间()==</li>
<li><code>ZLEXCOUNT key min max</code> 在有序集合中计算指定字典区间内成员数量</li>
<li><code>ZREM key member1 [member2..]</code> 移除有序集合中一个/多个成员</li>
<li><code>ZREMRANGEBYLEX key min max</code> 移除有序集合中给定的字典区间的所有成员</li>
<li><code>ZREMRANGEBYRANK key start stop</code> 移除有序集合中给定的排名区间的所有成员</li>
<li><code>ZREMRANGEBYSCORE key min max</code> 移除有序集合中给定的分数区间的所有成员</li>
<li><code>ZREVRANGE key start end</code> 返回有序集中指定区间内的成员，通过索引，分数从高到底</li>
<li><code>ZREVRANGEBYSCORRE key max min</code> 返回有序集中指定分数区间内的成员，分数从高到低排序</li>
<li><code>ZREVRANGEBYLEX key max min</code> 返回有序集中指定字典区间内的成员，按字典顺序倒序</li>
<li><code>ZREVRANK key member</code> 返回有序集合中指定成员的排名，有序集成员按分数值递减(从大到小)排序</li>
<li><code>ZINTERSTORE destination numkeys key1 [key2 ..]</code> 计算给定的一个或多个有序集的交集并将结果集存储在新的有序集合 key 中，numkeys：表示参与运算的集合数，将score相加作为结果的score</li>
<li><code>ZUNIONSTORE destination numkeys key1 [key2..]</code> 计算给定的一个或多个有序集的交集并将结果集存储在新的有序集合 key 中</li>
<li><code>ZSCAN key cursor [MATCH pattern\] [COUNT count]</code> 迭代有序集合中的元素（包括元素成员和元素分值）</li>
</ul>
<p>代码示例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br></pre></td><td class="code"><pre><span class="line">-------------------ZADD--ZCARD--ZCOUNT--------------</span><br><span class="line">127.0.0.1:6379&gt; ZADD myzset 1 m1 2 m2 3 m3 # 向有序集合myzset中添加成员m1 score&#x3D;1 以及成员m2 score&#x3D;2..</span><br><span class="line">(integer) 2</span><br><span class="line">127.0.0.1:6379&gt; ZCARD myzset # 获取有序集合的成员数</span><br><span class="line">(integer) 2</span><br><span class="line">127.0.0.1:6379&gt; ZCOUNT myzset 0 1 # 获取score在 [0,1]区间的成员数量</span><br><span class="line">(integer) 1</span><br><span class="line">127.0.0.1:6379&gt; ZCOUNT myzset 0 2</span><br><span class="line">(integer) 2</span><br><span class="line">----------------ZINCRBY--ZSCORE--------------------------</span><br><span class="line">127.0.0.1:6379&gt; ZINCRBY myzset 5 m2 # 将成员m2的score +5</span><br><span class="line">&quot;7&quot;</span><br><span class="line">127.0.0.1:6379&gt; ZSCORE myzset m1 # 获取成员m1的score</span><br><span class="line">&quot;1&quot;</span><br><span class="line">127.0.0.1:6379&gt; ZSCORE myzset m2</span><br><span class="line">&quot;7&quot;</span><br><span class="line">--------------ZRANK--ZRANGE-----------------------------------</span><br><span class="line">127.0.0.1:6379&gt; ZRANK myzset m1 # 获取成员m1的索引，索引按照score排序，score相同索引值按字典顺序顺序增加</span><br><span class="line">(integer) 0</span><br><span class="line">127.0.0.1:6379&gt; ZRANK myzset m2</span><br><span class="line">(integer) 2</span><br><span class="line">127.0.0.1:6379&gt; ZRANGE myzset 0 1 # 获取索引在 0~1的成员</span><br><span class="line"></span><br><span class="line">&quot;m1&quot;</span><br><span class="line">&quot;m3&quot;</span><br><span class="line">127.0.0.1:6379&gt; ZRANGE myzset 0 -1 # 获取全部成员</span><br><span class="line">&quot;m1&quot;</span><br><span class="line">&quot;m3&quot;</span><br><span class="line">&quot;m2&quot;</span><br><span class="line"></span><br><span class="line">testset&#x3D;&gt;&#123;abc,add,amaze,apple,back,java,redis&#125; score均为0</span><br><span class="line">------------------ZRANGEBYLEX---------------------------------</span><br><span class="line">127.0.0.1:6379&gt; ZRANGEBYLEX testset - + # 返回所有成员</span><br><span class="line"></span><br><span class="line">&quot;abc&quot;</span><br><span class="line">&quot;add&quot;</span><br><span class="line">&quot;amaze&quot;</span><br><span class="line">&quot;apple&quot;</span><br><span class="line">&quot;back&quot;</span><br><span class="line">&quot;java&quot;</span><br><span class="line">&quot;redis&quot;</span><br><span class="line">127.0.0.1:6379&gt; ZRANGEBYLEX testset - + LIMIT 0 3 # 分页 按索引显示查询结果的 0,1,2条记录</span><br><span class="line">&quot;abc&quot;</span><br><span class="line">&quot;add&quot;</span><br><span class="line">&quot;amaze&quot;</span><br><span class="line">127.0.0.1:6379&gt; ZRANGEBYLEX testset - + LIMIT 3 3 # 显示 3,4,5条记录</span><br><span class="line">&quot;apple&quot;</span><br><span class="line">&quot;back&quot;</span><br><span class="line">&quot;java&quot;</span><br><span class="line">127.0.0.1:6379&gt; ZRANGEBYLEX testset (- [apple # 显示 (-,apple] 区间内的成员</span><br><span class="line">&quot;abc&quot;</span><br><span class="line">&quot;add&quot;</span><br><span class="line">&quot;amaze&quot;</span><br><span class="line">&quot;apple&quot;</span><br><span class="line">127.0.0.1:6379&gt; ZRANGEBYLEX testset [apple [java # 显示 [apple,java]字典区间的成员</span><br><span class="line">&quot;apple&quot;</span><br><span class="line">&quot;back&quot;</span><br><span class="line">&quot;java&quot;</span><br><span class="line"></span><br><span class="line">-----------------------ZRANGEBYSCORE---------------------</span><br><span class="line">127.0.0.1:6379&gt; ZRANGEBYSCORE myzset 1 10 # 返回score在 [1,10]之间的的成员</span><br><span class="line"></span><br><span class="line">&quot;m1&quot;</span><br><span class="line">&quot;m3&quot;</span><br><span class="line">&quot;m2&quot;</span><br><span class="line">127.0.0.1:6379&gt; ZRANGEBYSCORE myzset 1 5</span><br><span class="line">&quot;m1&quot;</span><br><span class="line">&quot;m3&quot;</span><br><span class="line"></span><br><span class="line">--------------------ZLEXCOUNT-----------------------------</span><br><span class="line">127.0.0.1:6379&gt; ZLEXCOUNT testset - +</span><br><span class="line">(integer) 7</span><br><span class="line">127.0.0.1:6379&gt; ZLEXCOUNT testset [apple [java</span><br><span class="line">(integer) 3</span><br><span class="line">------------------ZREM--ZREMRANGEBYLEX--ZREMRANGBYRANK--ZREMRANGEBYSCORE--------------------------------</span><br><span class="line">127.0.0.1:6379&gt; ZREM testset abc # 移除成员abc</span><br><span class="line">(integer) 1</span><br><span class="line">127.0.0.1:6379&gt; ZREMRANGEBYLEX testset [apple [java # 移除字典区间[apple,java]中的所有成员</span><br><span class="line">(integer) 3</span><br><span class="line">127.0.0.1:6379&gt; ZREMRANGEBYRANK testset 0 1 # 移除排名0~1的所有成员</span><br><span class="line">(integer) 2</span><br><span class="line">127.0.0.1:6379&gt; ZREMRANGEBYSCORE myzset 0 3 # 移除score在 [0,3]的成员</span><br><span class="line">(integer) 2</span><br><span class="line">testset&#x3D;&gt; &#123;abc,add,apple,amaze,back,java,redis&#125; score均为0</span><br><span class="line">myzset&#x3D;&gt; &#123;(m1,1),(m2,2),(m3,3),(m4,4),(m7,7),(m9,9)&#125;</span><br><span class="line">----------------ZREVRANGE--ZREVRANGEBYSCORE--ZREVRANGEBYLEX-----------</span><br><span class="line">127.0.0.1:6379&gt; ZREVRANGE myzset 0 3 # 按score递减排序，然后按索引，返回结果的 0~3</span><br><span class="line"></span><br><span class="line">&quot;m9&quot;</span><br><span class="line">&quot;m7&quot;</span><br><span class="line">&quot;m4&quot;</span><br><span class="line">&quot;m3&quot;</span><br><span class="line">127.0.0.1:6379&gt; ZREVRANGE myzset 2 4 # 返回排序结果的 索引的2~4</span><br><span class="line">&quot;m4&quot;</span><br><span class="line">&quot;m3&quot;</span><br><span class="line">&quot;m2&quot;</span><br><span class="line">127.0.0.1:6379&gt; ZREVRANGEBYSCORE myzset 6 2 # 按score递减顺序 返回集合中分数在[2,6]之间的成员</span><br><span class="line">&quot;m4&quot;</span><br><span class="line">&quot;m3&quot;</span><br><span class="line">&quot;m2&quot;</span><br><span class="line">127.0.0.1:6379&gt; ZREVRANGEBYLEX testset [java (add # 按字典倒序 返回集合中(add,java]字典区间的成员</span><br><span class="line">&quot;java&quot;</span><br><span class="line">&quot;back&quot;</span><br><span class="line">&quot;apple&quot;</span><br><span class="line">&quot;amaze&quot;</span><br><span class="line"></span><br><span class="line">-------------------------ZREVRANK------------------------------</span><br><span class="line">127.0.0.1:6379&gt; ZREVRANK myzset m7 # 按score递减顺序，返回成员m7索引</span><br><span class="line">(integer) 1</span><br><span class="line">127.0.0.1:6379&gt; ZREVRANK myzset m2</span><br><span class="line">(integer) 4</span><br><span class="line">mathscore&#x3D;&gt;&#123;(xm,90),(xh,95),(xg,87)&#125; 小明、小红、小刚的数学成绩</span><br><span class="line">enscore&#x3D;&gt;&#123;(xm,70),(xh,93),(xg,90)&#125; 小明、小红、小刚的英语成绩</span><br><span class="line">-------------------ZINTERSTORE--ZUNIONSTORE-----------------------------------</span><br><span class="line">127.0.0.1:6379&gt; ZINTERSTORE sumscore 2 mathscore enscore # 将mathscore enscore进行合并 结果存放到sumscore</span><br><span class="line">(integer) 3</span><br><span class="line">127.0.0.1:6379&gt; ZRANGE sumscore 0 -1 withscores # 合并后的score是之前集合中所有score的和</span><br><span class="line"></span><br><span class="line">&quot;xm&quot;</span><br><span class="line">&quot;160&quot;</span><br><span class="line">&quot;xg&quot;</span><br><span class="line">&quot;177&quot;</span><br><span class="line">&quot;xh&quot;</span><br><span class="line">&quot;188&quot;</span><br><span class="line"></span><br><span class="line">127.0.0.1:6379&gt; ZUNIONSTORE lowestscore 2 mathscore enscore AGGREGATE MIN # 取两个集合的成员score最小值作为结果的</span><br><span class="line">(integer) 3</span><br><span class="line">127.0.0.1:6379&gt; ZRANGE lowestscore 0 -1 withscores</span><br><span class="line"></span><br><span class="line">&quot;xm&quot;</span><br><span class="line">&quot;70&quot;</span><br><span class="line">&quot;xg&quot;</span><br><span class="line">&quot;87&quot;</span><br><span class="line">&quot;xh&quot;</span><br><span class="line">&quot;93&quot;</span><br></pre></td></tr></table></figure>

<p>应用案例：</p>
<ol>
<li>set排序 存储班级成绩表 工资表排序！</li>
<li>普通消息，1.重要消息 2.带权重进行判断</li>
<li>排行榜应用实现，取Top N测试</li>
</ol>
<p>转载自：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/kylinxxx/p/13770063.html">https://www.cnblogs.com/kylinxxx/p/13770063.html</a></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">HLY</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://cddorz.github.io/2020/11/16/Redis/">https://cddorz.github.io/2020/11/16/Redis/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://cddorz.github.io" target="_blank">HLY-Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a></div><div class="post_share"><div class="social-share" data-image="https://pic4.zhimg.com/80/v2-b0c015f49137896301d515bc54e04e0f_720w.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/2020/11/14/Linux%E7%9B%B8%E5%85%B3/"><img class="next-cover" data-lazy-src="https://pic1.zhimg.com/80/v2-1b93504d5cf852aa045cb77f71e2bddc_720w.jpg?source=1940ef5c" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Linux相关</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="gitalk-container"></div></div></div></div></div><div class="aside_content" id="aside_content"><div class="card-widget card-info"><div class="card-content"><div class="card-info-avatar is-center"><img class="avatar-img" data-lazy-src="/img/tubiao.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"><div class="author-info__name">HLY</div><div class="author-info__description">西电学子努力中</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">8</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">5</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">5</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/cddorz"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/orzcdd" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:2878153350@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div></div><div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="clock"><img v-if="!clockshow" src="/images/loading.gif" style="height:120px;width:100%"><table class="clock" v-if="clockshow"><tbody><tr><td class="clockdate">{{date}}</td><td class="weatherimg" align="center" valign="middle"><img id="weatherimg" :src="weatherimg"></td><td class="temperature" align="center" valign="middle">{{temperature+ "*C"}}</td><td class="humidityimg"><img id="humidityimg" :src="humidityimg"></td><td class="humidity">{{humidity + "%"}}</td></tr><tr class="time"><td colspan="5">{{time}}</td></tr><tr><td class="usaqi" colspan="1">{{usaqi + ' ' + 'US' + ' ' +'AQI' }}</td><td class="city" colspan="3">{{city}}</td><td class="daylight" colspan="1">{{daylight}}</td></tr></tbody></table></div></div></div></div></div><div class="sticky_layout"><div class="card-widget card-announcement"><div class="card-content"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">西电大二学生，学习后端开发，对unitiy游戏开发有兴趣，希望大二能去字节实习。</div></div></div><div class="card-widget card-recent-post"><div class="card-content"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2020/11/16/Redis/" title="Redis"><img data-lazy-src="https://pic4.zhimg.com/80/v2-b0c015f49137896301d515bc54e04e0f_720w.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Redis"></a><div class="content"><a class="title" href="/2020/11/16/Redis/" title="Redis">Redis</a><time datetime="2020-11-16T06:23:13.000Z" title="发表于 2020-11-16 14:23:13">2020-11-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/11/14/Linux%E7%9B%B8%E5%85%B3/" title="Linux相关"><img data-lazy-src="https://pic1.zhimg.com/80/v2-1b93504d5cf852aa045cb77f71e2bddc_720w.jpg?source=1940ef5c" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux相关"></a><div class="content"><a class="title" href="/2020/11/14/Linux%E7%9B%B8%E5%85%B3/" title="Linux相关">Linux相关</a><time datetime="2020-11-14T15:46:13.000Z" title="发表于 2020-11-14 23:46:13">2020-11-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/11/12/Mybatis%EF%BC%88%E4%BA%8C%EF%BC%89/" title="Mybatis（二）"><img data-lazy-src="https://pic2.zhimg.com/80/v2-d2a9e345588460086e88b8ea3f1aaf56_720w.jpg?source=1940ef5c" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Mybatis（二）"></a><div class="content"><a class="title" href="/2020/11/12/Mybatis%EF%BC%88%E4%BA%8C%EF%BC%89/" title="Mybatis（二）">Mybatis（二）</a><time datetime="2020-11-12T04:02:20.000Z" title="发表于 2020-11-12 12:02:20">2020-11-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/11/11/Mybatis/" title="Mybatis（一）"><img data-lazy-src="https://pic4.zhimg.com/80/v2-7c7fce3b754722fad07c25a1048f7861_720w.jpg?source=1940ef5c" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Mybatis（一）"></a><div class="content"><a class="title" href="/2020/11/11/Mybatis/" title="Mybatis（一）">Mybatis（一）</a><time datetime="2020-11-11T11:14:59.000Z" title="发表于 2020-11-11 19:14:59">2020-11-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/11/10/%E5%B0%91%E5%B9%B4%E4%BA%8C%E5%AD%97%EF%BC%8C%E5%BA%94%E4%B8%8E%E5%B9%B3%E5%BA%B8%E7%9B%B8%E6%96%A5/" title="少年二字，应与平庸相斥"><img data-lazy-src="https://pic4.zhimg.com/80/v2-0e1cbe8d70d8b1cc9856f424e54c36f7_720w.jpg?source=1940ef5c" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="少年二字，应与平庸相斥"></a><div class="content"><a class="title" href="/2020/11/10/%E5%B0%91%E5%B9%B4%E4%BA%8C%E5%AD%97%EF%BC%8C%E5%BA%94%E4%B8%8E%E5%B9%B3%E5%BA%B8%E7%9B%B8%E6%96%A5/" title="少年二字，应与平庸相斥">少年二字，应与平庸相斥</a><time datetime="2020-11-10T08:49:30.000Z" title="发表于 2020-11-10 16:49:30">2020-11-10</time></div></div></div></div></div><div class="card-widget card-categories"><div class="card-content"><div class="item-headline"><i class="fas fa-folder-open"></i><span>分类</span></div><ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Java/"><span class="card-category-list-name">Java</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/Redis/"><span class="card-category-list-name">Redis</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/mybatis/"><span class="card-category-list-name">mybatis</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E7%B3%BB%E7%BB%9F/"><span class="card-category-list-name">系统</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E9%9A%8F%E7%AC%94/"><span class="card-category-list-name">随笔</span><span class="card-category-list-count">3</span></a></li>
            
            </ul></div></div><div class="card-widget card-tags"><div class="card-content"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/%E6%80%BB%E7%BB%93/" style="font-size: 1.5em; color: rgb(59, 91, 170)">总结</a><a href="/tags/%E5%B0%91%E5%B9%B4/" style="font-size: 1.1em; color: rgb(105, 134, 26)">少年</a><a href="/tags/mybatis/" style="font-size: 1.3em; color: rgb(94, 191, 106)">mybatis</a><a href="/tags/Linux/" style="font-size: 1.1em; color: rgb(42, 161, 145)">Linux</a><a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 1.1em; color: rgb(186, 183, 116)">数据库</a></div></div></div><div class="card-widget card-archives"><div class="card-content"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/11/"><span class="card-archive-list-date">十一月 2020</span><span class="card-archive-list-count">6</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/10/"><span class="card-archive-list-date">十月 2020</span><span class="card-archive-list-count">2</span></a></li></ul></div></div><div class="card-widget card-webinfo"><div class="card-content"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">8</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2020-11-17T07:26:04.083Z"></div></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(https://pic4.zhimg.com/80/v2-b0c015f49137896301d515bc54e04e0f_720w.jpg)"><div id="footer-wrap"><div class="copyright">&copy;2020 By HLY</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="rightside.chat_btn"><i class="fas fa-sms"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',()=> {preloader.endLoading()})</script><div class="js-pjax"><script>function addGitalkSource () {
  const ele = document.createElement('link')
  ele.rel = 'stylesheet'
  ele.href= 'https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css'
  document.getElementsByTagName('head')[0].appendChild(ele)
}

function loadGitalk () {
  function initGitalk () {
    var gitalk = new Gitalk({
      clientID: 'bae48c226ba03a6ed416',
      clientSecret: 'a68ce5f4bc785b3c4243dcc9e1abdf3c6ad0b61e',
      repo: 'cddorz.github.io',
      owner: 'cddorz',
      admin: ['cddorz'],
      id: 'd3f8d97f7b4e3b33da2469ae0d317427',
      language: 'zh-CN',
      perPage: 10,
      distractionFreeMode: false,
      pagerDirection: 'last',
      createIssueManually: false,
      updateCountCallback: commentCount
    })
    gitalk.render('gitalk-container')
  }

  if (typeof Gitalk === 'function') initGitalk()
  else {
    addGitalkSource()
    $.getScript('https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js', initGitalk)
  }
}

function commentCount(n){
  let isCommentCount = document.querySelector('#post-meta .gitalk-comment-count')
  if (isCommentCount) {
    isCommentCount.innerHTML= n
  }
}

if ('Gitalk' === 'Gitalk' || !false) {
  if (false) btf.loadComment(document.getElementById('gitalk-container'), loadGitalk)
  else loadGitalk()
} else {
  function loadOtherComment () {
    loadGitalk()
  }
}</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script src="/clock/js/vue.min.js"></script><script src="/clock/js/clock.js"></script><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-show-text.min.js" async="async" mobile="true"></script></div><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"/live2dw/assets/haruto.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":false},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>